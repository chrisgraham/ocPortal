if(window.opera&&!window.XMLHttpRequest){window.XMLHttpRequest=function(){this.readyState=0;this.status=0;this.statusText="";this._headers=[];this._aborted=false;this._async=true;this.abort=function(){this._aborted=true};this.getAllResponseHeaders=function(){return this.getAllResponseHeader("*")};this.getAllResponseHeader=function(c){var a="";for(var b=0;b<this._headers.length;b++){if(c=="*"||this._headers[b].h==c){a+=this._headers[b].h+": "+this._headers[b].v+"\n"}}return a};this.setRequestHeader=function(b,a){this._headers[this._headers.length]={h:b,v:a}};this.open=function(e,c,d,a,b){this.method=e;this.url=c;this._async=true;this._aborted=false;if(arguments.length>=3){this._async=d}if(arguments.length>3){opera.postError("XMLHttpRequest.open() - user/password not supported")}this._headers=[];this.readyState=1;if(this.onreadystatechange){this.onreadystatechange()}};this.send=function(a){if(!navigator.javaEnabled()){alert("XMLHttpRequest.send() - Java must be installed and enabled.");return}if(this._async){setTimeout(this._sendasync,0,this,a)}else{this._sendsync(a)}};this._sendasync=function(a,b){if(!a._aborted){a._sendsync(b)}};this._sendsync=function(r){this.readyState=2;if(this.onreadystatechange){this.onreadystatechange()}var f=new java.net.URL(new java.net.URL(window.location.href),this.url);var j=f.openConnection();for(var p=0;p<this._headers.length;p++){j.setRequestProperty(this._headers[p].h,this._headers[p].v)}this._headers=[];if(this.method=="POST"){j.setDoOutput(true);var b=new java.io.OutputStreamWriter(j.getOutputStream());b.write(r);b.flush();b.close()}var m=false;var k=false;var e=false;var c=false;var h=false;var q=false;for(var p=0;;p++){var o=j.getHeaderFieldKey(p);var l=j.getHeaderField(p);if(o==null&&l==null){break}if(o!=null){this._headers[this._headers.length]={h:o,v:l};switch(o.toLowerCase()){case"content-encoding":m=true;break;case"content-length":k=true;break;case"content-type":e=true;break;case"date":c=true;break;case"expires":h=true;break;case"last-modified":q=true;break}}}var s;s=j.getContentEncoding();if(s!=null&&!m){this._headers[this._headers.length]={h:"Content-encoding",v:s}}s=j.getContentLength();if(s!=-1&&!k){this._headers[this._headers.length]={h:"Content-length",v:s}}s=j.getContentType();if(s!=null&&!e){this._headers[this._headers.length]={h:"Content-type",v:s}}s=j.getDate();if(s!=0&&!c){this._headers[this._headers.length]={h:"Date",v:(new Date(s)).toUTCString()}}s=j.getExpiration();if(s!=0&&!h){this._headers[this._headers.length]={h:"Expires",v:(new Date(s)).toUTCString()}}s=j.getLastModified();if(s!=0&&!q){this._headers[this._headers.length]={h:"Last-modified",v:(new Date(s)).toUTCString()}}var d="";var g=j.getInputStream();if(g){var a=new java.io.BufferedReader(new java.io.InputStreamReader(g));var n;while((n=a.readLine())!=null){if(this.readyState==2){this.readyState=3;if(this.onreadystatechange){this.onreadystatechange()}}d+=n+"\n"}a.close();this.status=200;this.statusText="OK";this.responseText=d;this.readyState=4;if(this.onreadystatechange){this.onreadystatechange()}if(this.onload){this.onload()}}else{this.status=404;this.statusText="Not Found";this.responseText="";this.readyState=4;if(this.onreadystatechange){this.onreadystatechange()}if(this.onerror){this.onerror()}}}}}if(!window.ActiveXObject&&window.XMLHttpRequest){window.ActiveXObject=function(a){switch(a.toLowerCase()){case"microsoft.xmlhttp":case"msxml2.xmlhttp":return new XMLHttpRequest()}return null}};